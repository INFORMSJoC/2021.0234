two-process wait-free test-and-set first explicit currently algorithm two-process wait-free test-and-set 4-valued single writer single reader atomic variables test-and-set elementary steps reset exactly elementary step finite-state analysis proofs correctness length table 