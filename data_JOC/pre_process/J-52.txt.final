multi-hop network action individu intermedi node typic commun endpoint endpoint not end-to-end transmiss success therefor absenc incent contrari ration selfish node packet low prioriti simpli not forward packet principal-ag model hidden-act problem appropri design contract direct endpoint contract individu router recurs router contract next downstream router case further per-hop monitor not necessarili util princip social welfar system addit mechan hidden-inform scenario hidden-inform hidden-act categori subject descriptor c24 [ computer-commun network ] system j4 [ social behavior scienc ] econom gener term design econom introduct endpoint multi-hop network reli intermedi node packet sender receiv set intermedi node independ agent such individu node ad-hoc peer-top network autonom system internet incent problem intermedi node signific commun comput cost forward packet direct benefit so consequ ration util maxim node packet low prioriti not packet ration behavior suboptim system perform endpoint incent eg form payment intermedi node packet howev action intermedi node often endpoint mani case endpoint onli not packet destin not failur specif node path even form monitor mechan locat failur still unabl caus failur deliber action intermedi node extern factor control intermedi node such network congest channel interfer data corrupt problem hidden action hardli uniqu network also moral hazard problem long interest econom literatur inform asymmetri incent contract theori agenc theori literatur problem principal-ag model multipl agent sequenti hidden action ] result threefold first possibl contract cooper intermedi node packet as well node packet differ level qualiti servic path transit cost prior transmiss princip first solut contract directli intermedi node recurs network node contract follow node loss util second per-hop monitor impact princip s util equilibrium princip equilibrium node cooper total payment same monitor howev domin strategi equilibrium solut concept nash equilibrium achiev absenc monitor third absenc priori inform transit cost packet path possibl mechan scenario hidden-inform hidden-act scenario princip premium scenario known transit cost baselin model principal-ag model princip pair commun endpoint multi-hop network agent intermedi node capabl packet endpoint princip practic sender receiv individu take-it-or-leave-it offer contract agent contract agent action sequenti payoff payment schedul contract necessari agent make subsequ take-it-or-leave-it offer downstream agent particip risk neutral standard assumpt global observ final outcom enforc payment parti simplic agent onli possibl action signific effort littl effort action choic agent i ai ∈ ai = stand low-effort high-effort action respect action cost agent c ai c = > c = stage node same c present clariti assumpt later loss gener c = high-effort cost c so c = = c = = util agent i ui function payment princip si action ai cost ci ui si ci ai = si − outcom x ∈ xg xb xg good outcom packet destin xb bad outcom packet destin outcom function vector action agent path = a1 ∈ n loss rate channel benefit sender outcom w x w xg = wg xb wb util sender consequ u s w x s s = pn i=1 a sender equilibrium node high-effort action need constraint agent i ir individu ration particip constraint expect util particip reserv util ic incent compat expect util high-effort util low-effort network scenario topolog cost common knowledg sender advanc path packet cost path other scenario sender not priori inform model scenario unknown topolog cost implic scenario context contract also direct contract princip sign individu contract use notion ex individu ration agent state system s dn1 sourc destin intermedi node multi-hop path sender destin figur structur multihop game topolog transit cost node recurs contract node contractu relationship downstream node remaind paper section agent packet transit cost common knowledg section model scenario unknown transit cost section recurs direct contract relationship section model scenario agent differ level qualiti servic internet rout case studi section section present relat work section paper known transit cost section scenario princip advanc node path destin cost figur agent forward packet scenario monitor drop forward monitor scenario agent forward packet princip monitor per-hop outcom consequ princip payment schedul agent conting final outcom x si x = sb i i sb i si x = xb sg i si x = xg timelin scenario figur perhop loss rate k probabl packet success node i successor i pr xg i→i+1|ai = − k ai xg i→j success transmiss node i j proposit optim contract high-effort behavior intermedi node nash equi118 librium2 expect payment node same cost follow payment schedul sb i si x = xb sg i si x = xg c − k n−i+1 proof princip need ic ir constraint agent i ic pr xg |aj≥i = sg i pr xb |aj≥i = sb i − c ≥ pr xg |ai = aj > i sg i pr xb |ai = aj > i sb i constraint expect util equal util subsequ node forward as well ir pr xg s→i|aj < i pr xg |aj≥i = sg i pr xb |aj≥i = sb i − c + pr xb s→i|aj < i sb i constraint expect util equal reserv util other node forward constraint eq ic − k sg i + − − k n−i+1 sb i − c ≥ sb i ir i n−i+1 sg i + n−i+1 sb i −c + − − k i sb i standard result constraint optim contract [ ] equat solut eq next prove expect payment node expect cost equilibrium expect cost node i transit cost probabl cost probabl packet i − k i expect payment node i receiv pr xg sg i pr xb sb i = − k c − k n−i+1 = − k i note expect payment node decreas node destin due asymmetr distribut risk node destin probabl packet destin low payment node expect payment princip e [ s ] = − k n+1 nx i=1 sg i + − − k n+1 nx i=1 sb i = − k n+1 nx i=1 ci − k n−i+1 expect payment princip not onli total cost also number node path proposit path respect length n1 n2 hop per-hop transit cost c1 c2 per-hop loss rate k1 k2 such transit node action sequenti realli subgameperfect equilibrium spe nash equilibrium remaind paper figur path equal total cost differ length individu cost c1n1 = c2n2 equal total cost • − k1 n1+1 = − k2 n2+1 equal benefit n1 < n2 path path expect total payment princip path proof expect payment path j e [ s ] j = x cj − kj i cj − kj − − kj nj kj so c1 − k1 − − k1 n1 k1 > c2 − k2 − − k2 let m = c1n1 = c2n2 n = − k1 n1+1 = − k2 n2+1 mn n1+1 − n n1+1 n1 − n n1+1 mn n2+1 − n n2+1 n2 − n n2+1 f = n n+1 − n n n+1 n − n n+1 then enough f monoton n ∂f ∂n = g n n h n n g n n = − ln n n + n+1 − n n+1 − n + n + n n+1 h n n = n + n2 −1 + n n+1 h n n ∀n n therefor enough g n n n ∈ i ln n ii n n+1 > n n+2 n+1 therefor g n n ∀n paribu path alway one exampl topolog figur path equal total cost total payment princip differ eq expect total payment top path e [ s ] = pr xg + sg b „ c1 − k1 + c1 − k1 « − k1 expect total payment bottom path e [ s ] = pr xg + sg b + sg c = c2 − k2 + c2 − k2 + c2 − k2 − k2 n1 = c1 = n2 = c2 = equal total cost equal benefit e [ s = e [ s = drop forward monitor suppos princip per-hop monitor information3 per-hop inform set mechan princip exampl princip payment schedul conting arriv next hop instead arriv final destin such inform use princip wish equilibrium node packet proposit drop versu forward model princip same util per-hop monitor inform not proof proof proposit alreadi find previou section absenc per-hop inform expect cost intermedi node expect payment order ir constraint essenti intermedi node expect amount expect cost otherwis node better-off not therefor other payment scheme expect payment princip intermedi node addit node packet probabl packet destin same scenario thu expect benefit princip same inde even absenc per-hop monitor inform princip achiev first-best solut reader inde case exampl mechan condit payment arriv next hop possibl onli per-hop monitor inform new mechan princip payment schedul conting packet next hop not payment i sg i packet i sb i otherwis costless monitor case scenario use monitor befor princip equilibrium node packet expect util princip differ benefit expect payment expect benefit node forward same scenario onli expect total payment ident as well monitor mechan princip follow constraint ic pr xg = sg + pr xb = sb − ≥ pr xg = sg + pr xb = sb ir pr xg s→i|aj < i pr xg = sg + pr xb = sb − c recent propos account framework such monitor inform ] constraint ic − k sg + ksb − ≥ s0 ir − k i − k sg + ksb − c constraint optim contract befor follow payment schedul sb sg = − expect total payment scenario e [ s ] = i=1 − k i sb + i sg + − k n+1 nsg = − k n+1 nx i=1 ci − k n−i+1 scenario monitor equat expect total payment same monitor differ scenario first payment structur differ per-hop monitor payment node locat i contrast n ident contract second solut concept differ monitor strategi profil ai ∀i nash equilibrium agent incent unilater strategi profil contrast use monitor action node i independ other agent behavior therefor domin strategi equilibrium solut concept nash equilibrium ] ] appropri differ solut concept context onlin environ unknown transit cost certain network set transit cost node forward path not common knowledg problem hidden inform section follow question possibl contract cooper behavior presenc hidden-act hiddeninform princip s loss due lack knowledg transit cost hidden-inform problem princip mechan truth revel privat inform agent rout game princip transit cost inform network router order cost path lcp source-destin pair network router strateg declar transit cost profit mechan literatur rout game [ ] assum onc transit cost lcp node lcp obedi forward packet loss network ie = section hidden inform hidden action mechan truth revel high-effort action equilibrium node lossi commun channel ≥ v cg mechan semin paper ] nisan ronen vcg mechan truth revel transit cost edg figur game structur f p ss onli hidden-inform figur game structur f p ss hiddeninform hidden-act biconnect network such cost path vcg mechan strategyproof mechan truth revel domin strategi equilibrium [ ] fpss feigenbaum al slightli model router selfish agent instead edg distribut algorithm vcg payment timelin fpss game figur fpss transit node track amount traffic counter payment period princip transit node counter valu fpss transit node obedi packet forward behavior not counter high effort packet forward section fpss fpss environ lossi commun channel ie ≥ strateg behavior term packet forward fpss equilibrium node truth transit cost forward packet lcp figur timelin fpss first stage sender payment function sg i i success failur packet deliveri payment node incent cost truth later packet payment final outcom fpss node bid bi report transit cost node i truth bi = ci b vector b1 bn bid transit node ii b indic function lcp bid vector b such ii b i lcp otherwis fpss ] payment node i equilibrium pi = biii b + [ x r ir b|i ∞ br − x r ir b br ] = x r ir b|i ∞ br − x r=i ir b br express b|i x x j = cj j = i x x fpss sb i sg i function pi k n first sb i equal order true lcp otherwis strateg node incent extrem small cost princip lcp then node packet transit cost payment sb i posit profit payment fpss sb i sg i pi − k n−i+1 then fpss nash equilibrium node truth transit cost node lcp forward packet proof order proposit node incent follow misbehavior truth reveal cost drop packet lie cost forward packet lie cost drop packet node truth cost forward packet expect util node i lcp e [ u ] i pr xg s→i e [ ] − ci + pr xb s→i sb i = − k i − k sg i + − − k n−i+1 sb i ci + − − k i sb i = − k i − k n−i+1 pi − k n−i+1 − − k i = − k i pi − ci last inequ fact fpss truth mechan thu pi ≥ ci expect util node not lcp node packet i equal e [ u ] i i lcp equal e [ u ] i i lcp therefor node not util misbehavior next show node not util misbehavior i lcp e [ u ] i bi > ci i bi < p r ir b|i ∞ br − p r=i ir b br still lcp payment independ bi util not ii bi > p r ir b|i ∞ br − p r=i ir b br not lcp e [ u ] i util truth cost b bi < ci still lcp payment independ bi util not i lcp e [ u ] i bi > ci lcp util not b bi < ci i bi < p r ir b|i ∞ br − p r=i ir b br lcp gain expect util e [ u ] i = − k i pi − ct howev i lcp ci > x r ir c|i ∞ cr − x r=i ir c cr node truth cost pi = x r ir c|i ∞ cr − x r=i ir c cr < ci therefor e [ u ] i ii bi > p r ir b|i ∞ br − p r=i ir b br lcp util not therefor equilibrium node truth transit cost receiv packet hidden inform onli context fpss truth revel domin strategi equilibrium current set hidden inform hidden action fpss nash equilibrium absenc per-hop monitor domin strategi equilibrium presenc per-hop monitor consist result section hidden action onli particular per-hop monitor princip payment i sg i node failur success deliveri next node payment i i = pi/ − k domin strategi node cost truth forward packet discuss more gener mechan m bid vector b equilibrium payment pi b i lcp mechan m equilibrium same bid vector packet forward payment sb i sg i pi b − k n−i+1 sketch proof im i b = im i b ∀i m same choic metric expect util lcp node e [ u ] i = − k i pi b − ci expect util non-lcp node node i util bi m also util bi m contradict equilibrium m node incent packet expect util addit gener fpss fpss also gener first-pric auction fpa mechan princip lcp node lcp bid pi b = bi first-pric auction nash equilibrium strategi equilibrium therefor gener fpa nash equilibrium addit comment class mechan first expect total payment princip mechan e [ s ] = i=1 − k i pi b expect benefit princip e [ ] = − k n+1 wg pn pi wg expect payment benefit respect onli hidden-inform problem hidden action also consider gener mechan strateg behavior payment final outcom account lossi commun channel payment distribut risk differ payment benefit not due strateg forward behavior commun therefor lossless network not gap benefit payment independ strateg non-strateg forward behavior second loss princip due unknown transit cost also price frugal activ field research [ ] price greatli network topolog mechan simpl princip s loss special case not trivial problem gener exampl topolog parallel disjoint path sourc destin first-pric auction loss princip differ cost path second-shortest path loss fpss mechan recurs contract section direct recurs contract direct contract princip contract directli node path directli recurs payment princip contract first node path turn contract second so such node contract downstream node payment final result figur direct payment princip ident cost node path commun channel node recurs payment node onli downstream node sever question context knowledg princip order cooper behavior recurs contract structur recurs contract cooper behavior relat total payment direct recurs contract • possibl recurs contract scenario unknown transit cost figur structur multihop game topolog recurs contract order question ir ic constraint princip first node path princip contract first node account incent first node second node so way destin exampl topolog figur princip contract node a subsequ contract a b follow constrint ir pr xg a→b|aa = e [ ] − c + pr xb a→b|aa = sb a→b ic e [ s|ab ] − ≥ e [ ] e [ s|ab ] = pr xg b→d|ab = sg a→b + pr xb b→d|ab = sb a→b e [ ] = pr xg b→d|ab = sg a→b + pr xb b→d|ab = sb a→b constraint valu sb a→b sg a→b sb a→b sg a→b = c/ − k valu s constraint contract a ir pr xg s→a|a = e [ − ] − c + pr xb s→a|a = sb s→a ic e [ ss→a − sa→b|ai ] − ≥ e [ − = ab ] e [ ss→a − sa→b|ai ] = pr xg a→d|ai = sg s→a − sg a→b +pr xb a→d|ai = sb s→a − sb a→b e [ − = ab ] = pr xg a→d|aa = ab sg s→a − sg a→b +pr xb a→d|aa = ab sb s→a − sb a→b sb s→a sg s→a sb s→a sg s→a = c − k + expect total payment e [ s ] = sg s→apr xg s→d sb s→apr xb s→d c − k − k equal total payment direct contract eq expect total payment princip direct recurs contract equal proof order expect total payment payment first node path appropri behavior sb i drop / forward model constraint pr xg = sg i sg i+1 ci ⇔ − k n−i+1 sg i sg i+1 ci = yield ≤ i n sg i ci − k n−i+1 + sg i+1 thu sg n = cn − k n−1 = cn−1 − k + sg n = cn−1 − k + cn − k · · · = c1 − k + = = nx i=1 ci − k i expect total payment e [ s ] = − k sg = − k n+1 nx i=1 ci − k n−i+1 total payment direct payment eq payment final outcom expect payment node expect cost node incent downstream node payment necessari downstream node not packet inform princip posess order recurs contract direct payment expect payment not sole total payment path also topolog therefor princip onli first node forward path not ident other node still number node path individu transit cost final possibl recurs contract unknown transit cost so structur such contract princip distribut algorithm necessari payment pi truth revel follow payment schedul first node cooper behavior sb = sg = nx i=1 pi − k answer not clear contract known transit cost expect payment node usual expect cost therefor node not appropri incent princip s guarante payment phase exampl fpss princip guarante node expect payment pi > ci payment enforc same entiti howev case recurs contract entiti cost discoveri stage princip not same entiti defin payment forward stage transit node transit node contract second stage downstream node packet as long expect payment expect cost even promis amount thu node payment profit transit node plausibl scenario no truth cost therefor recurs contract transit cost strateg equival contract not clear case unknown transit cost high-qual versu low-qual forward so far agent strategi space drop forward action section variat model agent low-qual servic high-qual servic service-differenti servic model packet best-effort prioriti basi ] contrast forward packet still next hop probabl even low-effort action second exampl practic hot-potato rout inter-domain rout today s internet individu autonom system s hot-potato rout earli exit rout packet downstream as first possibl exit late exit rout packet packet exit closer destin absenc explicit incent not surpris as s hot-potato rout cost even rout ] exampl absenc contract ration node low-effort perform nevertheless behavior appropri design contract formal probabl packet success node i i pr xg i→i+1|ai − k − qai q ∈ ] k ∈ q ] drop versu forward model low-effort action node result deliveri failur contrast node high/low scenario low-effort hope higheffort level other agent proposit high-qual versu low-qual model transit cost common knowledg princip same util perhop inform not proof ic ir constraint same proof proposit valu eq differ model ic +q sg i + +q n−i+1 sb i ≥ − k − k + q sg i + − − k − k + q n−i sb i ir − k + q i − k + q sg i + − − k + q n−i+1 sb i − c + − − k + q i sb i set constraint follow solut sb i = − k + q i − q sg i = − k + q i − + − k + q −n q version high low payment i monitor follow constraint ic − k + q sg i + − q sb i − c ≥ − k sg i + k sb i ir − k + q i − k + q sg i + − q sb i − c solut sb i c k − q sg i ck expect payment princip forward same equal e [ s ] = c − k + q − − k + q n k − q proof payment structur high-qual versu low-qual model differ drop versu forward model particular optim contract low-outcom payment sb i now zero neg payment agent princip event packet destin set necessari limit liabil constraint ≥ first-best solut proposit high-qual versu low-qual model neg payment expect payment node expect cost optim contract proof proof direct outcom follow statement optim contract contract equat optim contract e [ ] equal i cost optim contract sb i = i k−1 q therefor other contract sender node expect payment transit cost addit differ model drop versu forward princip sign contract n node path none singl node packet failur contrast high versu low-qual forward success low effort action well payment probabl success therefor possibl princip util onli m n node path expect outcom m independ specif m node same time individu payment i eq therefor princip contract onli n node so node destin name node n − m + n − n high-qual versu low-qual model unknown transit cost futur work case studi internet differ deploy internet scheme variou model work gateway protocol bgp current inter-domain rout protocol internet rout path vector protocol onli autonom system s rout not cost current bgp rout lack priori inform transit cost case princip eg multi-hom site tier-1 mechan section individu node path such contract premium real cost not clear recurs contact scenario addit current protocol not infrastructur implement direct contract endpoint network recent sever new architectur context internet princip not onli set path bgp also perform path network topolog approach such inform end-to-end [ ] approach edg network measur network topolog ] approach task topolog perform inform third-parti routing-as-a-servic propos ] propos quit differ natur common attempt visibl transpar network inform topolog transit cost scenario transit cost model section case first-best contract individu contract node path howev section as long agent next hop princip full benefit onli first hop implement recurs contract howev variou propos network topolog perform inform not strateg behavior intermedi node realiz inform princip subsequ contractu relationship intermedi node strateg true cost entiti such inform recent approach problem packet obituari packet deliveri last success hop ] approach third parti keynot independ network perform relat studi non-coop behavior commun network design incent signific attent context wireless ad-hoc rout ] consid problem malici behavior node posit request then actual packet detect report mechan essenti malici node howev rather node not forward traffic misbehav node therebi burden therefor mechan not effect selfish behavior order selfish behavior approach ] reput exchang node simpli first-hand observ ] other approach propos payment scheme ] cooper ] work payment scheme sender intermedi node order sever type selfish behavior approach node receipt thirdparti entiti type per-hop monitor not context internet rout ] account framework host servic provid after-thefact audit fate packet propos part approach end host control path packet ] sender cost inform fulli path packet contract first-best util account framework [ ] main goal node network condit inform decis entiti individu ass duti adequ framework first task differ approach second problem need per-hop inform research distribut algorithm mechan design damd bgp [ ] work mechan hidden-inform problem problem enforc desir behavior also object ] challeng distribut amd [ ] same agent system also mechan mechan s rule own welfar mechan [ ] use mostli mechan deviat algorithm focu work design payment scheme appropri incent context multi-hop rout other work field account servic out-of-band mechan secur issu context such node authent messag encrypt orthogon problem paper exampl [ ] problem inform asymmetri hidden-act also moral hazard well econom [ ] ] identifi problem moral hazard product team imposs share rule effici budget-balanc ] show task possibl product place sequenti conclus futur direct paper multi-hop rout set action intermedi node sourc and/or destin possibl payment scheme cooper behavior intermedi node per-hop outcom not util particip network performac addit scenario unknown transit cost also possibl mechan cooper behavior equilibrium sender premium inform transit node model result sever natur intrigu research avenu • consid manipul collus behavior payment scheme analyz feasibl recurs contract hiddeninform transit cost propos payment scheme cooper equilibrium not uniqu equilibrium strategi profil uniqu equilibrium eg penalti successor node • effect congest capac constraint mechan preliminari result sever sender singl transit node s capac sender demand premium even transit cost common knowledg premium function second-highest demand addit congest probabl success deliveri sender cost altern path util level rival cost altern path fulli full-inform nash equilibrium first price auction character mechaism hal varian use comment work part nation scienc foundat itr award ani-0085879 ani-0331659 career award ani0133811 