new onlin model import aspect modern financi market volum averag price trade limit order book extens studi competit algorithm model onlin algorithm stock trade categori subject descriptor f2 [ analysi algorithm problem complex ] miscellan j4 [ social behavior scienc ] econom gener term algorithm econom introduct popular imag wall street often trader boldli larg gambl just market intuit vast major trade actual consider technic constraint often complex combin busi regulatori institut issu result certain kind standard trade strategi criteria invit algorithm analysi common activ modern financi market volum averag price vwap trade inform vwap stock specifi market period simpli averag price share period price transact market volum vwap trade attempt fix number share price close vwap veri larg institut trade main motiv vwap activ typic scenario veri larg mutual fund % outstand share larg publicli compani huge fraction share fund s manag % 1-month period such decis fund s own regul other consider typic fund manag larg number share open market profession broker intellig trade time possibl multipl exchang order market impact such sizabl transact thu fund manag brokerag help % brokerag typic fund manag s problem immedi simpli share directli fund manag then price brokerag fund manag price day sale too riski brokerag share extend period event control such war price dramat usual answer brokerag share fund manag per-shar price vwap futur period exampl brokerag % per-shar price month s vwap cent brokerag now veri clean challeng share next month way exactli vwap penni share profit vwap penni cent share such small-margin high-volum profit extrem lucr larg brokerag import vwap mani vwap trade inde major brokerag vwap box price volum model order book model macroscop distribut model owt θ log r ] o log r log n pbin maxpric + e pbin maxpric -approx pbin maxpric θ log q same vwap θ log r o log r log n pbin vol ω q schedul o log q larg n + pbin vol -approx pbin volum [ n qn ] figur tabl result paper row repres result owt vwap criterion column repres model entri tabl competit ratio algorithm optim algorithm ratio paramet r bound maximum minimum price fluctuat paramet q bound maximum minimum volum fluctuat respect model section descript macroscop distribut model result owt trade criterion criterion directli vwap criterion howev vwap set restrict maximum minimum volum fluctuat q addit class result q small compani exclus proprietari vwap trade technolog paper first studi vwap trade algorithm onlin competit ratio first vwap trade problem basic onlin model price-volum model gener previou theoret onlin trade model market volum inform model vwap algorithm competit ratio set one-way trade owt problem [ ] interest result howev vwap trade problem new onlin trade model import recent phenomenon limit order book financi market briefli limit buy order specifi number share desir price onli parti side well-defin match procedur major exchang limit order book list limit order possibl futur execut dawn equiti exchang onli veri recent book visibl trader real time thu way trade algorithm varieti rich market microstructur data such data algorithm topic great current interest wall street ] thu new onlin trade model limit order book one-way vwap trade problem result figur caption summari now trade model price volum inform sequenc trade model gener previou formal onlin trade infinit liquid assumpt neg market impact larg number share typic order book model next section note terminolog paper otherwis term market activ order other algorithm consider set game algorithm market model price-volum trade model intraday trade activ stock discret sequenc price volum pair pt vt t = t here = correspond day s market open t = t close noth technic special time horizon singl day particularli consist limit order book trade wall street pair pt vt fact total vt share averag price share pt market time t realist number interv t reason larg sensibl common approxim price share interv price-volum model infinit liquid assumpt trade algorithm precis onlin model price-volum sequenc pair time observ pt vt possibl fraction number share price pt goal n share cours day henc time possibl fraction number share price pt subject global constraint t t=1 nt = n thu share time t − close price market nt = n − t −1 t=1 nt pt way certain exactli n share cours day onli thing algorithm schedul market price-volum stream ani algorithm fraction volum algorithm onli integr volum same expect number share hard constraint exactli n share addit slight loss convers note onli fraction volum price-volum model liquid not issu order book model not fraction volum vwap trade goal onlin algorithm a exactli n share not profit se market vwap market vwap intraday trade sequenc s = p1 v1 pt vt simpli averag price share cours trade day ie vwapm s t t=1 ptvt /v v total daili volum v = t t=1 vt sequenc s algorithm a n stock volum sequenc n1 nt then analog vwap a market sequenc s vwapa s t t=1 ptnt /n note market vwap not share algorithm vwap competit ratio a respect set sequenc σ then rvwap a = max s∈σ vwapm s /vwapa s case a definit expect vwapa s max wall street definit vwapm not own trade account easi challeng criterion contrast vwap common measur perform onlin sell algorithm one-way trade owt competit ratio ] respect set sequenc σ rowt a = max s∈σ pt/vwapa s algorithm perform individu price sequenc s vwap owt averag price share sell algorithm measur market perform case owt rather ambiti benchmark high price day volum entir vwap trade modest goal favor overal market averag day import common differ approach now simpl fact specif sequenc s vwapa s vwapm s howev rvwap not sequenc s price pt ident imposs averag share price thu algorithm a rvwap a rowt a closer a respect perform measur vwap result price-volum model previou work onlin trade gener not possibl finit bound competit ratio absolut assumpt set sequenc σbound maximum variat price volum exact set thu assumpt volum variabl assumpt  let < vmin ≤ vmax posit constant q = vmax /vmin intraday trade sequenc s ∈ σ total daili volum v ∈ [ vmin vmax ] price variabl assumpt  let < pmin ≤ pmax posit constant r = pmax/pmin intraday trade sequenc s ∈ σ price pt ∈ [ pmin pmax ] t = t competit ratio gener set consist assumpt intuit trivial case r = q = case r = fluctuat price schedul optim case q = total volum v trade period competit ratio vt v n share time period owt problem price-volum model volum irrelev perform criterion vwap criterion central owt problem price variabl assumpt result [ ] optim competit ratio θ log r first result establish optim competit ratio vwap volum variabl assumpt θ log q algorithm price data theorem price-volum model volum variabl assumpt onlin algorithm a n share competit ratio rvwap a log q addit onli volum variabl not price variabl assumpt onlin algorithm a n share rvwap a = ω log q proof sketch upper bound idea similar price reserv algorithm ] owt problem similar spirit gener techniqu classifi select [ ] consid paramet ˆv estim total volum day then time t market price volum pt vt algorithm fraction vt/ ˆv share famili log q such algorithm algorithm ai ˆv = vmin clearli ai competit ratio o log q vwap competit ratio algorithm parallel algorithm n/ log q share altern ai guarante same competit ratio now proof bound perform vwap owt problem algorithm c-competit vwap set q 3c-competit owt set r = q/2 sequenc s price owt problem price-volum sequenc vwap problem price vwap sequenc same s volum vwap sequenc segment price s log r interv pmin pmin suppos pt ∈ [ pmin pmin first time s price interv then vwap sequenc volum vt not first visit interv pt vt = maximum price s pmax vwap sequenc pmax /3 c competit algorithm averag sell pmax /3c bound now bound ] altern approach vwap volum favor price algorithm owt problem note bound theorem previou onli price variat bound theorem price-volum model price variabl assumpt onlin algorithm a n share competit ratio rvwap a = o log r addit onli price variabl not volum variabl assumpt n share rvwap a = ω log r proof sketch follow immedi result [ ] owt upper bound simpl fact sequenc s vwapa s max1≤t≤t pt bound reduct owt demonstr logarithm vwap competit ratio assumpt bound variabl total volum bound variabl maximum price assumpt possibl algorithm minimum log q log r flexibl approach deriv fact vwap quantiti price volum matter owt relatedresultsintheprice-volumemodel vwap algorithm so far use daili data pt vt price volum inform contrast fix schedul vwap algorithm distribut f1 f2 ft simpli ftn share time t independ pt vt schedul vwap algorithm slight variant surprisingli common wall street schedul usual histor intraday volum data next result such algorithm consider dynam adapt algorithm term case competit ratio price-volum model volum price variabl assumpt fix schedul vwap a n share vwap competit ratio rvwap a = ω min t r proof result subsect appendix so far emphasi vwap algorithm exactli n share mani realist circumst howev actual flexibl precis number share instanc true larg brokerag mani separ vwap trade common algorithm firm quit will small posit unsold share execut price follow theorem interestingli analogu owt problem trade-off share perform dramat model will number share vari q fact vwap competit ratio price-volum model volum variabl assumpt algorithm a alway n qn share averag price share exactli vwapm s mani onlin problem clear distinct benefit problem cost problem ] vwap set share benefit problem share cost problem definit competit ratio rbuy vwap a rbuy owt a algorithm figur sampl island order book msft exactli n share maxs∈σ vwapa s /vwapm s maxs∈σ maxt vwapa s /pt respect eventhough theorem also buy gener competit ratio buy cost problem much follow theorem price-volum model volum price variabl assumpt onlin algorithm a n share vwap competit ratio rbuy vwap a = o q √ r addit onlin algorithm a n share vwap competit ratio rbuy vwap a = ω q √ r limit order book trade model onlin trade model limit order book necessari background detail mechan financi market sometim market microstructur then result algorithm owt vwap problem background limit order book market microstructur a fundament distinct stock trade limit order market order suppos share microsoft msft stock limit order not onli desir volum share also desir price msft current roughli share figur actual snapshot recent msft order book island wwwislandcom well-known electron exchang nasdaq stock onli will share share limit order specif order queue buy order book price unexecut buy price top often bid multipl limit order same price time arriv order book exampl figur order immedi extant order share same price order our similarli sell order book sell limit order instanc share msft time sell price often ask thu order book competit limit order top high buy price low sell price competit limit order bid ask price again simpli price limit order top buy sell book respect togeth sometim insid market differ spread definit order book alway exclus unexecut order queue order hope price direct then order method first time market order immedi competit limit order book thu market order share enough volum sell order book share instanc exampl figur order limit sell order share share share then share share last limit order new top sell limit order book second buy sell respect limit order ask bid respect price then order order book import price execut price limit order alreadi book not price incom order immedi market limit order atom instantan strict tempor sequenc order order never simultan rise definit last price exchang simpli last price exchang order quantiti usual peopl casual ticker price stock note limit buy sell respect order price infin respect effect market order thu loss gener order limit order limit order unexecut parti simplic limit order never book reader ] further discuss modern electron exchang market microstructur model onlin order book trade model realist detail market microstructur just competit ratio refin model day s market activ sequenc limit order pt vt bt here bt bit order buy sell order pt limit order price number share arriv such limit order onlin trade algorithm own limit order sourc market algorithm limit order then simpli process section limit order not immedi execut process appropri book possibl futur execut order partial fulli so execut residu share respect book goal vwap owt algorithm essenti same price-volum model context follow fundament way first assumpt infinit liquid price-volum model entir number share avail price total volum limit order price second order therefor complet limit order book visibl algorithm consist modern electron financi exchang inde sourc much current interest wall street ] gener definit competit ratio order book model fact now algorithm s activ sequenc execut price volum thu first execut sequenc limit order sequenc market algorithm s = p1 v1 b1 pt vt bt limit order sequenc market s = p1 v1 b1 pt vt bt limit order sequenc algorithm otherwis bt sell type merg s s sequenc p1 v1 b1 p1 v1 b1 pt vt bt pt vt bt time sequenc order market algorithm note algorithm option not order zero volum order order book mainten order execut process section sequenc merg s s irregular interv trade occur number share price execut trade sell parti market algorithm execm s s = q1 w1 sequenc execut market parti other algorithm sell parti qt execut price execut volum similarli execa s s = r1 x1 rt xt sequenc execut algorithm sell parti thu s s execm s s set execut gener t possibl much t revenu algorithm market revm s s t t=1 qtwt reva s s t t=1 rtxt note quantiti sole execut sequenc s s s s respect algorithm exactli n share owt competit ratio a rowt a maximum ratio s ∈ σ revenu a revenu optim oﬄin algorithm a∗ formal a∗ exactli n share rowt a = max s∈σ max a∗ reva∗ s s∗ reva s s s∗ limit order sequenc a∗ s algorithm a then appropri expect respect s ∼ a vwap competit ratio rvwap a maximum ratio s ∈ σ market algorithm vwap formal defin vwapm s s revm s s t t=1 wt denomin just total execut volum order market similarli vwapa s s reva s s /n algorithm n share definit implicitli a price unsold share vwap competit ratio a then rvwap a = max s∈σ vwapm s s /vwapa s s s onlin sequenc limit order a respons sequenc s owt result order book model owt problem order book model subtl version price variabl assumpt due fact algorithm s trade high low price day assumpt note execm s ∅ sequenc execut interact algorithm order book price variabl assumpt  let < pmin ≤ pmax posit constant r = pmax/pmin intraday trade sequenc s ∈ σ price pt sequenc execm s ∅ pt ∈ [ pmin pmax ] t = t note assumpt not ratio high low price sequenc s s s s r fact ratio sequenc execa s s infinit algorithm stock price order book model order book price variabl assumpt onlin algorithm a n share owt competit ratio rowt a log r log n proof algorithm a work price p set pmin2i ≤ i log r sell limit order n share price p begin day altern a log r limit order i-th one price pmin volum n/ log r order begin day algorithm sell order day price p algorithm s n share first price henc k share price p activ then a kp share pj multiset price individu share buy limit order share unexecut activ algorithm algorithm order loss gener p1 ≥ p2 ≥  consid kth such price pk order n share day s start price pk then return kpk k∗ = argmaxk kpk algorithm pk∗ guess p satisfi ∈ [ pk∗ /2 pk∗ ] henc log r competit quantiti max1≤k≤n kpk note ρ ≡ n i=1 pi = n i ≤ kpk n i log n kpk ρ sum top n price pi a s involv similarli multiset price individu execut share price unexecut buy order share now order sell a now a n share reva ≤ n i=1 pi ≤ ρ essenti inequ intuit idea sell algorithm onli unmatch buy order share price induct remov activ sell algorithm price first last share last sell order a market arbitrari sequenc merg s s last sell order market volum share modif top n price p1 pn not sell order share not case claim trivial true remov sell order share addit unexecut buy order share equal price induct share sell order market time t then top n price not now share last sell order market time t then top n price not sell order share not then claim trivial true els sell order share then claim true becaus share sell order i correspond buy order share equal valu remaind sequenc case claim true buy order match order share equal price effect share sell order remaind sequenc induct assumpt onli price henc n share reva ≤ ρ now revenu log r es ∼a [ reva s s ≥ max kpk ≥ ρ/ log n reva / log n perform arbitrari sequenc n limit order vwap result order book model owt algorithm theorem follow vwap result corollari order book model order book price variabl assumpt onlin algorithm a n share sell vwap competit ratio rvwap a = o log r log n now rather differ assumpt sequenc s order volum max price assumpt set sequenc σ follow properti first order market volum γ mild assumpt typic singl order market not high volum due issu assumpt algorithm place limit order time approxim γ market execut second larg volum sell order book price pmax order market price pmax way latter assumpt order book model sequenc s ∈ σ huge number sell order vmax price pmax assumpt maximum price paramet not price ratio r finit not bound price buy share trivial order book model bound order volum max price assumpt algorithm a exactli γn market execut then a n share reva s s n = vwapa s s ≥ − vwapm s s pmax n s sequenc n limit order s proof algorithm trade day volum interv real-tim durat period i γ share market algorithm market vwap onli share period i vwapi ith volum interv algorithm limit order exactli share price close vwapi precis algorithm onli order discret price pmax pmax  volum interv i algorithm limit order share discret price vwapi strictli analysi algorithm s limit order day total revenu algorithm − vwapm s s n vwapm s s uniform mixtur vwapi definit same amount market volum algorithm s limit order − vwapi dollar interv i now potenti revenu algorithm due unexecut limit order assumpt individu order volum γ then algorithm abl limit order block γ share henc γn market order n order market limit order thu share unexecut level discret price ladder abov interv i algorithm place limit order strictli vwapi so vwapj ≥ vwapi j > i limit order thu unexecut limit order vwap remaind day unexecut order price level bound revenu thu sum discret price ∞ i=1 − i ≤ pmax / clearli algorithm n share note n larg vwapa − time market vwap final total volum market execut v then γ = v/n γ > onli upper bound v abl logarithm loss follow assumpt tri market volum variabl order book volum variabl assumpt now total volum share algorithm market variabl region market volum algorithm volum formal s ∈ σ total volum v share execm s s sequenc s n limit order satisfi ≤ vmin ≤ v ≤ vmax q = vmax /vmin follow corollari constant = γ such v ≤ γn then algorithm n n/2 limit order corollari order book model bound order volum max price assumpt order book volum variabl assumpt hold onlin algorithm a n share such vwapa s s log q vwapm s s n x qqq log q =471 e=377 x jnpr log q =566 e=397 x mchp log q =528 e=386 x chkp log q =656 e=450 figur here bound section empir volum distribut real stock qqq mchp jnpr chkp plot histogram total daili volum island stock last year half valu log q e pbin vol e minimum maximum daili volum data correspond vmin vmax respect worst-cas competit ratio bound twice log q algorithm stock respect correspond bound competit ratio perform algorithm volum distribut model twice e pbin vol respect % rel improv finer volum along slightli refin bound competit ratio algorithm empir volum distribut correct guarante even competit ratio respect stock detail macroscop distribut model result return price-volum model refin method analysi onlin trade algorithm gener method order book model futur work competit ratio so far measur perform rel baselin criterion case market sequenc s ∈ σ mani onlin set such worst-cas metric pessimist result variou relax such probabl distribut input sequenc now distribut model consider distribut complet market sequenc s ∈ σ volum distribut model onli distribut pvol total volum v market day then worst-cas competit ratio sequenc consist randomli chosen volum precis rvwap a pvol ev ∼pvol max s∈seq v vwapm s vwapa s here v ∼ pvol v respect distribut pvol seq v ⊂ σ set market sequenc p1 v1 pt vt t t=1 vt = v similarli owt rowt a pmaxpric = ep∼pmaxpric max s∈seq p p vwapa s here pmaxpric distribut just maximum price day then worst-cas sequenc consist price seq p ⊂ σ set market sequenc max1≤t≤t pt = p analog buy-sid definit model onli distribut maximum volum price algorithm also probabilist assumpt s consider typic statist financ model detail stochast model step-by-step evolut pt vt here instead onli distribut crude macroscop measur entir day s market activ such total volum high price worst-cas perform consist crude measur reason such set macroscop distribut model work el-yaniv al ] examin distribut assumpt similar worst196 case choic distribut well result origin worst-cas analysi sequenc contrast analysi specif distribut pvol pmaxpric natur mani financi context preliminari experiment result signific improv rather crude distribut inform account figur result vwap case distribut exactli onli approxim similar result macroscop distribut maximum daili price one-way trade set result macroscop distribut model algorithm so far work total volum maximum price bin exponenti size then index bin actual quantiti thu natur macroscop distribut model perform such algorithm common competit analysi distribut true bin index remain q power base logarithm pvol distribut total daili market volum relat distribut pbin vol bin indic i log q pbin i equal probabl pvol daili volum interv [ vmin vmin pbin vol log q last interv [ vmax /2 vmax ] e e pbin vol ei∼p vol vol i =   log q i=1 pbin vol i support pbin vol onli log q element e pbin vol distribut pvol place weight onli log q interv vmin vmin vmin vmax q distribut pvol total daili volum equal like interv note distribut pvol latter type far uniform entir rang [ vmin vmax ] theorem volum distribut model volum variabl assumpt onlin algorithm a n share onli knowledg total volum distribut pvol rvwap a pvol pbin vol proof section appendix concret exampl case pvol uniform distribut [ vmin vmax ] case pbin vol exponenti peak last bin width also weight case e pbin vol constant independ q constant competit ratio other hand pvol exponenti then pbin vol uniform o log q competit ratio just adversari price-volum set figur addit specif bound empir total daili volum distribut real stock now set pvol unknown approxim ˜pvol avail c pbin vol vol = log q j=1 j log q p bin i √ ˜p i c c pbin vol pbin vol = e pbin vol c infinit ˜pbin i pbin i volum distribut model volum variabl assumpt onlin algorithm a n share onli knowledg approxim ˜pvol pvol achiev rvwap a pvol pbin vol vol exampl result approxim obey pbin i ≤ i ≤ i i α bin index probabl factor α truth then easi c pbin vol vol ≤ αe pbin vol so theorem penalti approxim distribut factor α competit ratio 